# AI 工程技能学习系统 v1：任务清单

本文档根据 v1 开发方案 `plan.md` 生成，旨在提供一份详细、有序且可执行的开发任务列表。

- **[P]** 标记的任务表示可以并行开发。
- 任务按依赖关系排序，建议遵循此顺序执行。

---

### M1 (第一周): 项目初始化 + UI 静态还原

#### 第一阶段: 环境与项目设置

-   **T001: [环境]** 安装微信开发者工具和 Node.js 18+，在微信公众平台开通云开发环境，记录下环境 ID (envId)。
-   **T002: [初始化]** 在本地创建项目根目录 `AIEngineeringApp`，并完成 `git init`。
-   **T003: [初始化]** 创建小程序项目目录 `miniprogram/`，并依据 `plan.md` 初始化 `app.json`, `app.ts`, `app.wxss` 等核心文件。
-   **T004: [初始化]** 在 `app.json` 中配置 TabBar，包含“首页”、“技能树”、“我的”三个标签页。
-   **T005: [初始化]** 创建小程序标准目录结构，包括 `pages/`, `components/`, `utils/`, `assets/icons/`, `seed/`。
-   **T006: [初始化]** 将 `plan.md` 中提及的 `*.html` 高保真原型文件迁移至 `docs/prototypes/` 目录下。
-   **T007: [样式]** 从 `wechat-common-styles.html` 原型中抽取通用样式和主题变量，整合到 `app.wxss` 中。

#### 第二阶段: 页面与组件静态实现 (可并行)

-   **T008: [页面] [P]** 开发 **首页** (`pages/home/`) 的静态 WXML 结构与 WXSS 样式，使用固定的假数据进行渲染。
-   **T009: [页面] [P]** 开发 **技能树页面** (`pages/skill-tree/`) 的静态布局。
-   **T010: [页面] [P]** 开发 **技能详情页** (`pages/skill-detail/`) 的静态布局。
-   **T011: [页面] [P]** 开发 **测试页面** (`pages/quiz/`) 的静态布局，包括题目、选项、解析、结果等状态。
-   **T012: [页面] [P]** 开发 **个人中心页面** (`pages/profile/`) 的静态布局。
-   **T013: [组件] [P]** 开发可复用的 `skill-node` 组件（用于技能树节点）。
-   **T014: [组件] [P]** 开发可复用的 `progress-bar` 进度条组件。
-   **T015: [组件] [P]** 开发可复用的 `stat-card` 数据统计卡片组件。

---

### M2 (第二周): 云开发与数据接入

#### 第三阶段: 云数据库与种子数据

-   **T016: [数据]** 根据 `plan.md` 的数据模型定义，在云开发控制台创建所有需要的集合（如 `users`, `skills`, `progress` 等）。
-   **T017: [数据]** 编写 `seed/` 目录下的种子数据 JSON 文件（`branches.json`, `skills.json`, `questions.json`）。
-   **T018: [数据]** 将种子数据手动或通过脚本导入到对应的云数据库集合中。
-   **T019: [数据]** 为关键集合（如 `users.openid`, `progress.userId_skillId`）设置索引以优化查询性能。

#### 第四阶段: 云函数开发 (可并行)

-   **T020: [后端] [P]** 开发 `user.init` 云函数，实现用户登录/注册逻辑。
-   **T021: [后端] [P]** 开发 `skills.tree` 云函数，用于获取完整的技能树及用户进度。
-   **T022: [后端] [P]** 开发 `skills.detail` 云函数，用于获取单个技能的详细信息、任务列表和学习进度。
-   **T023: [后端] [P]** 开发 `quiz.get` 云函数，为指定技能随机获取一组测试题。
-   **T024: [后端] [P]** 开发 `progress.mark` 云函数，用于更新用户在某个技能上的学习进度或状态。
-   **T025: [后端] [P]** 开发 `quiz.submit` 云函数，用于提交答案、评分、记录会话并分发奖励。
-   **T026: [后端] [P]** 开发 `track.event` 云函数，用于基础的用户行为埋点。

---

### M3 (第三周): 核心逻辑与集成

#### 第五阶段: 前后端集成

-   **T027: [集成]** 封装 `utils/api.ts`，将所有云函数调用统一管理，替换此前的假数据逻辑。
-   **T028: [集成]** 在 `app.ts` 的 `onLaunch` 生命周期中调用 `user.init`，完成用户身份认证。
-   **T029: [集成]** 将 **首页** 与 `skills.tree` 云函数对接，实现用户学习进度的动态展示。
-   **T030: [集成]** 将 **技能树页面** 与 `skills.tree` 云函数对接，渲染可交互的技能节点。
-   **T031: [集成]** 将 **技能详情页** 与 `skills.detail` 云函数对接，并实现“开始学习”等交互。
-   **T032: [集成]** 将 **测试页面** 与 `quiz.get` 和 `quiz.submit` 云函数对接，完成完整的测试流程。

#### 第六阶段: 核心业务逻辑

-   **T033: [逻辑]** 在 `skills.tree` 云函数中实现技能解锁逻辑（依赖关系或分支完成度）。
-   **T034: [逻辑]** 在 `quiz.submit` 和 `progress.mark` 中实现经验值(EXP)与等级(Level)的计算和更新逻辑。
-   **T035: [逻辑]** 在 `quiz.submit` 中实现测试通过后的奖励（EXP、技能点）分发逻辑，并确保幂等性。
-   **T036: [逻辑]** 设计并实现成就授予的核心判断逻辑（可在多个相关云函数中触发）。
-   **T037: [逻辑]** 在前端实现测试页面的计时器功能。

---

### M4 (第四周): QA、优化与上线

#### 第七阶段: 测试与优化

-   **T038: [QA]** 编写核心流程的测试用例，覆盖“学习-任务-测试-通过-升级”的完整闭环。
-   **T039: [QA]** 对应用进行系统性测试，包括边界条件、弱网环境、中断恢复等。
-   **T040: [优化]** 审查并优化列表页面的渲染性能，按需添加懒加载。
-   **T041: [优化]** 检查云函数性能，特别是冷启动时间，并根据需要进行优化。
-   **T042: [优化]** 完善应用的空状态、加载状态和错误提示，提升用户体验。

#### 第八阶段: 上线准备

-   **T043: [文档]** 更新 `README.md`，补充项目运行、配置和部署的说明。
-   **T044: [部署]** 在小程序管理后台配置合法域名及云开发安全规则。
-   **T045: [部署]** 提交体验版进行内部测试，收集反馈并修复问题。
-   **T046: [部署]** 提交代码进行审核，准备正式发布。
-   **T047: [监控]** 配置云函数告警和关键指标看板，以便上线后监控应用状态。

---

### 并行开发建议

- **阶段二** (UI实现) 的所有页面和组件任务 (T008-T015) 可以完全并行。
- **阶段四** (云函数开发) 的所有后端任务 (T020-T026) 在数据库集合创建完毕后，可以并行开发。
- **建议分组**:
    - **前端开发者 A**: 负责 T008, T010, T012, T013
    - **前端开发者 B**: 负责 T009, T011, T014, T015
    - **后端开发者**: 在 T016-T019 完成后，可并行开始 T020-T026 的所有任务。
